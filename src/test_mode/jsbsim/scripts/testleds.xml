<?xml version="1.0"?>

<runscript name="testleds">

    <!--    development script to test led functions  -->
    <!--    specify aircraft & init files here        -->
    <use aircraft = "ledcraft" initialize="ledinit"/>
    
    <!--    specify events here                       -->
    <run start = "0.0" end = "20" dt = "0.01">
    
        <!--    initialization                        -->
        <property> testmode/reporttime </property>
        
        <!--    print status to screen                -->
        <event name="printstatus" persistent="true">
            <description>output status to screen</description>
            <condition>
                simulation/sim-time-sec >= testmode/reporttime
            </condition>
            <set name="testmode/reporttime" value="0.1" type="delta"/>
            <notify>
                <property caption="sim time "> simulation/sim-time-sec </property>
                <property caption="testroll "> testmode/testroll </property>
                <property caption="gyro     "> testmode/gyro </property>
                <property caption="ledcw    "> testmode/ledcw </property>
                <property caption="ledccw   "> testmode/ledccw </property>
            </notify>
        </event>
        
        <!--    start with no spin                      -->
        <event name="start">
            <description>start simulation with no spin</description>
            <condition> simulation/sim-time-sec >= 0.0 </condition>
            <set name="testmode/testspin" value="0"/>
            <notify>
                <property caption="sim time "> simulation/sim-time-sec </property>
                <property caption="testroll "> testmode/testroll </property>
                <property caption="gyro     "> testmode/gyro </property>
                <property caption="ledcw    "> testmode/ledcw </property>
                <property caption="ledccw   "> testmode/ledccw </property>
            </notify>
        </event>
        
        <!--    set spin to +5                         -->
        <event name="spin">
            <description>start simulation with no spin</description>
            <condition> simulation/sim-time-sec >= 1.0 </condition>
            <set name="testmode/testspin" value="5"/>
            <notify>
                <property caption="sim time "> simulation/sim-time-sec </property>
                <property caption="testroll "> testmode/testroll </property>
                <property caption="gyro     "> testmode/gyro </property>
                <property caption="ledcw    "> testmode/ledcw </property>
                <property caption="ledccw   "> testmode/ledccw </property>
            </notify>
        </event>
        
        <!--    pause spin                              -->
        <event name="pause">
            <description>start simulation with no spin</description>
            <condition> simulation/sim-time-sec >= 2.0 </condition>
            <set name="testmode/testspin" value="0"/>
            <notify>
                <property caption="sim time "> simulation/sim-time-sec </property>
                <property caption="testroll "> testmode/testroll </property>
                <property caption="gyro     "> testmode/gyro </property>
                <property caption="ledcw    "> testmode/ledcw </property>
                <property caption="ledccw   "> testmode/ledccw </property>
            </notify>
        </event>
        
        <!--    set spin to -5                         -->
        <event name="negative spin">
            <description>start simulation with no spin</description>
            <condition> simulation/sim-time-sec >= 3.0 </condition>
            <set name="testmode/testspin" value="-5"/>
            <notify>
                <property caption="sim time "> simulation/sim-time-sec </property>
                <property caption="testroll "> testmode/testroll </property>
                <property caption="gyro     "> testmode/gyro </property>
                <property caption="ledcw    "> testmode/ledcw </property>
                <property caption="ledccw   "> testmode/ledccw </property>
            </notify>
        </event>
        
        <!--    pause & end         -->
        <event name="end">
            <description>start simulation with no spin</description>
            <condition> simulation/sim-time-sec >= 4.0 </condition>
            <set name="testmode/testspin" value="0"/>
            <notify>
                <property caption="sim time "> simulation/sim-time-sec </property>
                <property caption="testroll "> testmode/testroll </property>
                <property caption="gyro     "> testmode/gyro </property>
                <property caption="ledcw    "> testmode/ledcw </property>
                <property caption="ledccw   "> testmode/ledccw </property>
            </notify>
        </event>
                 
        

    </run>
</runscript>
